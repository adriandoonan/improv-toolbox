---
import BaseLayout from "../../layouts/BaseLayout.astro";
// Import all tool pages except index
const toolPages = Object.values(
  import.meta.glob(["./*.astro", "./*/index.astro"], { eager: true })
).filter(
  (mod) =>
    mod && mod.tool && mod.tool.name && mod.tool.description && mod.tool.icon
);
---

<BaseLayout
  title="Tools"
  description="Handy improv tools for shows and classes."
>
  <section class="collection page-section">
    <div class="stack" style="gap:0.75rem;">
      <h1 class="section-title">Tools</h1>
      <p class="section-subtitle">
        Launch rehearsal helpers built for phones. Tap a card to open timers,
        suggestion engines, and more.
      </p>
    </div>
    <div class="tool-grid">
      {
        toolPages.map((tool) => (
          <a href={tool.tool.href} class="resource-card tool-card">
            <div class="tool-card__header">
              <span class="tool-card__icon">{tool.tool.icon}</span>
              <h2 class="resource-card__title">{tool.tool.name}</h2>
            </div>
            <p class="resource-card__summary">{tool.tool.description}</p>
            {tool.tool.creator && (
              <span class="meta-badge">Built by {tool.tool.creator}</span>
            )}
          </a>
        ))
      }
    </div>
  </section>
  <style>
    .tool-grid {
      display: grid;
      gap: clamp(1.25rem, 4vw, 1.75rem);
    }
    @media (min-width: 640px) {
      .tool-grid {
        grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
      }
    }
    .tool-card {
      text-decoration: none;
      padding: clamp(1.5rem, 4vw, 2rem);
      background: color-mix(in srgb, var(--surface-panel) 92%, transparent);
      border: 1px solid color-mix(
        in srgb,
        var(--color-accent) 16%,
        rgba(255, 255, 255, 0.08)
      );
    }
    .tool-card__header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .tool-card__icon {
      font-size: 1.9rem;
    }
  </style>
</BaseLayout>
