---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Breadcrumbs from "../../components/Breadcrumbs.astro";
import NotesPanel from "../../components/NotesPanel.astro";
import FavoriteToggle from "../../components/FavoriteToggle.astro";
import { getCollection, getEntry } from "astro:content";
export async function getStaticPaths() {
  const warmups = await getCollection("warmups");
  return warmups.map((warmup) => ({ params: { slug: warmup.slug } }));
}
const { slug } = Astro.params;
const warmup = await getEntry("warmups", slug);
---

<BaseLayout>
  <section class="page-section stack">
    <Breadcrumbs
      items={[
        { label: "Warmups", href: "/warmups" },
        { label: warmup?.data.name },
      ]}
    />
    <article class="content-card">
      <header class="stack" style="gap:0.75rem;">
        <div
          class="content-title-row"
          style="display:flex;align-items:center;gap:0.75rem;flex-wrap:wrap;"
        >
          <h1 class="section-title">{warmup?.data.name}</h1>
          <FavoriteToggle
            contentType="warmup"
            slug={warmup?.slug ?? ""}
            title={warmup?.data.name ?? "Warmup"}
            description={warmup?.data.shortDescription ?? ""}
          />
        </div>
        <p class="content-lead">{warmup?.data.shortDescription}</p>
        <ul class="content-meta">
          {warmup?.data.minimumPeople != null && (
            <li>
              <strong>Minimum people</strong>
              <span>{warmup?.data.minimumPeople}</span>
            </li>
          )}
          {warmup?.data.focus && (
            <li>
              <strong>Focus</strong>
              <span>{warmup?.data.focus}</span>
            </li>
          )}
        </ul>
      </header>
      <div class="content-body">
        <p>{warmup?.data.description}</p>
      </div>
    </article>
    <NotesPanel
      contentId={warmup?.slug ?? ""}
      contentType="warmup"
      contentTitle={warmup?.data.name ?? "Warmup"}
    />
  </section>
</BaseLayout>
