---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Breadcrumbs from "../../components/Breadcrumbs.astro";
import NotesPanel from "../../components/NotesPanel.astro";
import { getCollection, getEntry } from "astro:content";
export async function getStaticPaths() {
  const forms = await getCollection("forms");
  return forms.map((form) => ({ params: { slug: form.slug } }));
}
const { slug } = Astro.params;
const form = await getEntry("forms", slug);
---

<BaseLayout>
  <section class="page-section stack">
    <Breadcrumbs
      items={[{ label: "Forms", href: "/forms" }, { label: form?.data.name }]}
    />
    <article class="content-card">
      <header class="stack" style="gap:0.75rem;">
        <h1 class="section-title">{form?.data.name}</h1>
        <p class="content-lead">{form?.data.shortDescription}</p>
      </header>
      <div class="content-body">
        <p>{form?.data.description}</p>
        {form?.data.source && (
          <p>
            <a href={form?.data.source} target="_blank" rel="noopener">
              View original source
            </a>
          </p>
        )}
      </div>
    </article>
    <NotesPanel
      contentId={form?.slug ?? ""}
      contentType="form"
      contentTitle={form?.data.name ?? "Form"}
    />
  </section>
</BaseLayout>
